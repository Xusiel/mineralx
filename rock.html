<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MineralX - Rock Details</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo" onclick="window.location.href='index.html'">
            <h1>MineralX</h1>
        </div>
        <div class="controls">
            <div class="theme-toggle">
                <input type="checkbox" id="themeSwitch" onchange="toggleTheme()">
                <label for="themeSwitch" class="toggle-label">
                    <span class="sun-icon">‚òÄÔ∏è</span>
                    <span class="moon-icon">üåô</span>
                </label>
            </div>
            <div class="language-dropdown">
                <button class="language-btn" onclick="toggleLanguageDropdown()">Language</button>
                <div class="language-list" id="languageList">
                    <div class="language-option" data-lang="en" onclick="setLanguage('en')">English</div>
                    <div class="language-option" data-lang="fa" onclick="setLanguage('fa')">ŸÅÿßÿ±ÿ≥€å</div>
                </div>
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <nav id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">‚úñ</button>
            <ul>
                <li><a href="index.html#home" id="menuHome" onclick="toggleMenu()"><span>üè†</span> Home</a></li>
                <li><a href="index.html#rocks" id="menuRocks" onclick="toggleMenu()"><span>ü™®</span> Rocks & Minerals</a></li>
                <li><a href="index.html#search" id="menuSearch" onclick="toggleMenu()"><span>üîç</span> Search & Filter</a></li>
                <li><a href="index.html#about" id="menuAbout" onclick="toggleMenu()"><span>‚ÑπÔ∏è</span> About Us</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="rock-details" class="active">
            <h1 id="rockName">Loading...</h1>
            <div class="rock-detail-card">
                <img id="rockImage" alt="Rock Image">
                <div class="info">
                    <p><strong id="formulaLabel">Chemical Formula:</strong> <span id="rockFormula"></span></p>
                    <p><strong id="hardnessLabel">Hardness:</strong> <span id="rockHardness"></span></p>
                    <p><strong id="colorLabel">Color:</strong> <span id="rockColor"></span></p>
                    <p><strong id="locationLabel">Location:</strong> <span id="rockLocation"></span></p>
                    <p><strong id="usageLabel">Usage:</strong> <span id="rockUsage"></span></p>
                    <p id="description"></p>
                </div>
            </div>
            <button class="back-btn" onclick="goBack()">Back</button>
            <p id="debugMessage" style="color: red;"></p>
        </section>
    </main>

    <footer>
        <p>¬© 2025 MineralX. All rights reserved.</p>
    </footer>

    <script>
        const rocks = [
            { name: { en: "Quartz", fa: "⁄©Ÿàÿßÿ±ÿ™ÿ≤" }, formula: "SiO‚ÇÇ", hardness: 7, color: { en: "Colorless, White, Pink", fa: "ÿ®€å‚Äåÿ±ŸÜ⁄Øÿå ÿ≥ŸÅ€åÿØÿå ÿµŸàÿ±ÿ™€å" }, location: { en: "Brazil, Iran", fa: "ÿ®ÿ±ÿ≤€åŸÑÿå ÿß€åÿ±ÿßŸÜ" }, usage: { en: "Jewelry, Industry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ÿµŸÜÿπÿ™" }, image: "images/quartz.jpg" },
            { name: { en: "Calcite", fa: "⁄©ŸÑÿ≥€åÿ™" }, formula: "CaCO‚ÇÉ", hardness: 3, color: { en: "White, Yellow", fa: "ÿ≥ŸÅ€åÿØÿå ÿ≤ÿ±ÿØ" }, location: { en: "Mexico, Iran", fa: "ŸÖ⁄©ÿ≤€å⁄©ÿå ÿß€åÿ±ÿßŸÜ" }, usage: { en: "Cement, Decoration", fa: "ÿ≥€åŸÖÿßŸÜÿå ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™" }, image: "images/calcite.jpg" },
            { name: { en: "Amethyst", fa: "ÿ¢ŸÖÿ™€åÿ≥ÿ™" }, formula: "SiO‚ÇÇ", hardness: 7, color: { en: "Purple", fa: "ÿ®ŸÜŸÅÿ¥" }, location: { en: "Brazil, USA", fa: "ÿ®ÿ±ÿ≤€åŸÑÿå ÿ¢ŸÖÿ±€å⁄©ÿß" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/amethyst.jpg" },
            { name: { en: "Fluorite", fa: "ŸÅŸÑŸàÿ±€åÿ™" }, formula: "CaF‚ÇÇ", hardness: 4, color: { en: "Green, Blue, Purple", fa: "ÿ≥ÿ®ÿ≤ÿå ÿ¢ÿ®€åÿå ÿ®ŸÜŸÅÿ¥" }, location: { en: "China, Mexico", fa: "⁄Ü€åŸÜÿå ŸÖ⁄©ÿ≤€å⁄©" }, usage: { en: "Industry, Decoration", fa: "ÿµŸÜÿπÿ™ÿå ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™" }, image: "images/fluorite.jpg" },
            { name: { en: "Garnet", fa: "⁄Øÿßÿ±ŸÜÿ™" }, formula: "X‚ÇÉY‚ÇÇ(SiO‚ÇÑ)‚ÇÉ", hardness: 6.5, color: { en: "Red, Green", fa: "ŸÇÿ±ŸÖÿ≤ÿå ÿ≥ÿ®ÿ≤" }, location: { en: "India, USA", fa: "ŸáŸÜÿØÿå ÿ¢ŸÖÿ±€å⁄©ÿß" }, usage: { en: "Jewelry, Abrasives", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ÿ≥ÿß€åŸÜÿØŸá‚ÄåŸáÿß" }, image: "images/garnet.jpg" },
            { name: { en: "Topaz", fa: "ÿ™ŸàŸæÿßÿ≤" }, formula: "Al‚ÇÇSiO‚ÇÑ(F,OH)‚ÇÇ", hardness: 8, color: { en: "Blue, Yellow", fa: "ÿ¢ÿ®€åÿå ÿ≤ÿ±ÿØ" }, location: { en: "Brazil, Russia", fa: "ÿ®ÿ±ÿ≤€åŸÑÿå ÿ±Ÿàÿ≥€åŸá" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/topaz.jpg" },
            { name: { en: "Pyrite", fa: "Ÿæ€åÿ±€åÿ™" }, formula: "FeS‚ÇÇ", hardness: 6, color: { en: "Gold", fa: "ÿ∑ŸÑÿß€å€å" }, location: { en: "Spain, Peru", fa: "ÿßÿ≥ŸæÿßŸÜ€åÿßÿå Ÿæÿ±Ÿà" }, usage: { en: "Ore, Decoration", fa: "ÿ≥ŸÜ⁄Ø ŸÖÿπÿØŸÜÿå ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™" }, image: "images/pyrite.jpg" },
            { name: { en: "Malachite", fa: "ŸÖÿßŸÑÿß⁄©€åÿ™" }, formula: "Cu‚ÇÇCO‚ÇÉ", hardness: 3.5, color: { en: "Green", fa: "ÿ≥ÿ®ÿ≤" }, location: { en: "Congo, Russia", fa: "⁄©ŸÜ⁄ØŸàÿå ÿ±Ÿàÿ≥€åŸá" }, usage: { en: "Decoration, Pigment", fa: "ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™ÿå ÿ±ŸÜ⁄Ø‚ÄåÿØÿßŸÜŸá" }, image: "images/malachite.jpg" },
            { name: { en: "Obsidian", fa: "ÿßÿ®ÿ≥€åÿØ€åŸÜ" }, formula: "SiO‚ÇÇ (volcanic glass)", hardness: 5, color: { en: "Black", fa: "ÿ≥€åÿßŸá" }, location: { en: "Mexico, USA", fa: "ŸÖ⁄©ÿ≤€å⁄©ÿå ÿ¢ŸÖÿ±€å⁄©ÿß" }, usage: { en: "Tools, Decoration", fa: "ÿßÿ®ÿ≤ÿßÿ±ÿå ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™" }, image: "images/obsidian.jpg" },
            { name: { en: "Turquoise", fa: "ŸÅ€åÿ±Ÿàÿ≤Ÿá" }, formula: "CuAl‚ÇÜ(PO‚ÇÑ)‚ÇÑ(OH)‚Çà¬∑4H‚ÇÇO", hardness: 6, color: { en: "Blue, Green", fa: "ÿ¢ÿ®€åÿå ÿ≥ÿ®ÿ≤" }, location: { en: "Iran, USA", fa: "ÿß€åÿ±ÿßŸÜÿå ÿ¢ŸÖÿ±€å⁄©ÿß" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/turquoise.jpg" },
            { name: { en: "Diamond", fa: "ÿßŸÑŸÖÿßÿ≥" }, formula: "C", hardness: 10, color: { en: "Colorless, Yellow", fa: "ÿ®€å‚Äåÿ±ŸÜ⁄Øÿå ÿ≤ÿ±ÿØ" }, location: { en: "South Africa, Russia", fa: "ÿ¢ŸÅÿ±€åŸÇÿß€å ÿ¨ŸÜŸàÿ®€åÿå ÿ±Ÿàÿ≥€åŸá" }, usage: { en: "Jewelry, Cutting", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ÿ®ÿ±ÿ¥" }, image: "images/diamond.jpg" },
            { name: { en: "Emerald", fa: "ÿ≤ŸÖÿ±ÿØ" }, formula: "Be‚ÇÉAl‚ÇÇ(SiO‚ÇÉ)‚ÇÜ", hardness: 7.5, color: { en: "Green", fa: "ÿ≥ÿ®ÿ≤" }, location: { en: "Colombia, Zambia", fa: "⁄©ŸÑŸÖÿ®€åÿßÿå ÿ≤ÿßŸÖÿ®€åÿß" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/emerald.jpg" },
            { name: { en: "Ruby", fa: "€åÿßŸÇŸàÿ™ ÿ≥ÿ±ÿÆ" }, formula: "Al‚ÇÇO‚ÇÉ", hardness: 9, color: { en: "Red", fa: "ŸÇÿ±ŸÖÿ≤" }, location: { en: "Myanmar, Thailand", fa: "ŸÖ€åÿßŸÜŸÖÿßÿ±ÿå ÿ™ÿß€åŸÑŸÜÿØ" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/ruby.jpg" },
            { name: { en: "Sapphire", fa: "€åÿßŸÇŸàÿ™ ⁄©ÿ®ŸàÿØ" }, formula: "Al‚ÇÇO‚ÇÉ", hardness: 9, color: { en: "Blue, Pink", fa: "ÿ¢ÿ®€åÿå ÿµŸàÿ±ÿ™€å" }, location: { en: "Sri Lanka, Madagascar", fa: "ÿ≥ÿ±€åŸÑÿßŸÜ⁄©ÿßÿå ŸÖÿßÿØÿß⁄Øÿßÿ≥⁄©ÿßÿ±" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/sapphire.jpg" },
            { name: { en: "Opal", fa: "ÿßŸàŸæÿßŸÑ" }, formula: "SiO‚ÇÇ¬∑nH‚ÇÇO", hardness: 5.5, color: { en: "Multicolor", fa: "⁄ÜŸÜÿØÿ±ŸÜ⁄Ø" }, location: { en: "Australia, Ethiopia", fa: "ÿßÿ≥ÿ™ÿ±ÿßŸÑ€åÿßÿå ÿßÿ™€åŸàŸæ€å" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/opal.jpg" },
            { name: { en: "Hematite", fa: "ŸáŸÖÿßÿ™€åÿ™" }, formula: "Fe‚ÇÇO‚ÇÉ", hardness: 5, color: { en: "Black, Red", fa: "ÿ≥€åÿßŸáÿå ŸÇÿ±ŸÖÿ≤" }, location: { en: "Brazil, Australia", fa: "ÿ®ÿ±ÿ≤€åŸÑÿå ÿßÿ≥ÿ™ÿ±ÿßŸÑ€åÿß" }, usage: { en: "Ore, Jewelry", fa: "ÿ≥ŸÜ⁄Ø ŸÖÿπÿØŸÜÿå ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/hematite.jpg" },
            { name: { en: "Lapis Lazuli", fa: "ŸÑÿßÿ¨Ÿàÿ±ÿØ" }, formula: "(Na,Ca)‚Çà(AlSiO‚ÇÑ)‚ÇÜ(S,SO‚ÇÑ)", hardness: 5.5, color: { en: "Blue", fa: "ÿ¢ÿ®€å" }, location: { en: "Afghanistan, Chile", fa: "ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜÿå ÿ¥€åŸÑ€å" }, usage: { en: "Jewelry, Pigment", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ÿ±ŸÜ⁄Ø‚ÄåÿØÿßŸÜŸá" }, image: "images/lapis-lazuli.jpg" },
            { name: { en: "Agate", fa: "ÿπŸÇ€åŸÇ" }, formula: "SiO‚ÇÇ", hardness: 7, color: { en: "Multicolor", fa: "⁄ÜŸÜÿØÿ±ŸÜ⁄Ø" }, location: { en: "Brazil, Uruguay", fa: "ÿ®ÿ±ÿ≤€åŸÑÿå ÿßÿ±Ÿà⁄ØŸàÿ¶Ÿá" }, usage: { en: "Jewelry, Decoration", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ÿ™ÿ≤ÿ¶€åŸÜÿßÿ™" }, image: "images/agate.jpg" },
            { name: { en: "Jade", fa: "€åÿ¥ŸÖ" }, formula: "NaAlSi‚ÇÇO‚ÇÜ or Ca‚ÇÇ(Mg,Fe)‚ÇÖSi‚ÇàO‚ÇÇ‚ÇÇ(OH)‚ÇÇ", hardness: 6, color: { en: "Green, White", fa: "ÿ≥ÿ®ÿ≤ÿå ÿ≥ŸÅ€åÿØ" }, location: { en: "China, Myanmar", fa: "⁄Ü€åŸÜÿå ŸÖ€åÿßŸÜŸÖÿßÿ±" }, usage: { en: "Jewelry, Art", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€åÿå ŸáŸÜÿ±" }, image: "images/jade.jpg" },
            { name: { en: "Beryl", fa: "ÿ®ÿ±€åŸÑ" }, formula: "Be‚ÇÉAl‚ÇÇSi‚ÇÜO‚ÇÅ‚Çà", hardness: 7.5, color: { en: "Green, Blue, Pink", fa: "ÿ≥ÿ®ÿ≤ÿå ÿ¢ÿ®€åÿå ÿµŸàÿ±ÿ™€å" }, location: { en: "Colombia, Brazil", fa: "⁄©ŸÑŸÖÿ®€åÿßÿå ÿ®ÿ±ÿ≤€åŸÑ" }, usage: { en: "Jewelry", fa: "ÿ¨ŸàÿßŸáÿ±ÿ≥ÿßÿ≤€å" }, image: "images/beryl.jpg" }
        ];

        const translations = {
            en: {
                formulaLabel: "Chemical Formula",
                hardnessLabel: "Hardness",
                colorLabel: "Color",
                locationLabel: "Location",
                usageLabel: "Usage",
                menuHome: "Home",
                menuRocks: "Rocks & Minerals",
                menuSearch: "Search & Filter",
                menuAbout: "About Us",
                backBtn: "Back"
            },
            fa: {
                formulaLabel: "ŸÅÿ±ŸÖŸàŸÑ ÿ¥€åŸÖ€åÿß€å€å",
                hardnessLabel: "ÿ≥ÿÆÿ™€å",
                colorLabel: "ÿ±ŸÜ⁄Ø",
                locationLabel: "ŸÖÿ≠ŸÑ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨",
                usageLabel: "⁄©ÿßÿ±ÿ®ÿ±ÿØ",
                menuHome: "ÿÆÿßŸÜŸá",
                menuRocks: "ÿ≥ŸÜ⁄Ø‚ÄåŸáÿß Ÿà ⁄©ÿßŸÜ€å‚ÄåŸáÿß",
                menuSearch: "ÿ¨ÿ≥ÿ™ÿ¨Ÿà Ÿà ŸÅ€åŸÑÿ™ÿ±",
                menuAbout: "ÿØÿ±ÿ®ÿßÿ±Ÿá ŸÖÿß",
                backBtn: "ÿ®ÿßÿ≤⁄Øÿ¥ÿ™"
            }
        };

        let currentLanguage = localStorage.getItem("language") || "en";

        function updatePageLanguage() {
            const rockId = new URLSearchParams(window.location.search).get('id');
            const debugMessage = document.getElementById("debugMessage");
            const rock = rockId ? rocks.find(r => r.name.en.toLowerCase() === rockId.toLowerCase()) : null;

            if (rock) {
                document.getElementById("rockName").textContent = rock.name[currentLanguage];
                document.getElementById("rockImage").src = rock.image;
                document.getElementById("rockImage").onerror = () => { this.src = 'https://via.placeholder.com/300?text=No+Image'; };
                document.getElementById("rockFormula").textContent = rock.formula;
                document.getElementById("rockHardness").textContent = rock.hardness;
                document.getElementById("rockColor").textContent = rock.color[currentLanguage];
                document.getElementById("rockLocation").textContent = rock.location[currentLanguage];
                document.getElementById("rockUsage").textContent = rock.usage[currentLanguage];
                document.getElementById("description").textContent = `This is a detailed description of ${rock.name[currentLanguage]}.`;
                debugMessage.textContent = "";
            } else {
                document.getElementById("rockName").textContent = currentLanguage === "en" ? "Rock Not Found" : "⁄©ÿßŸÜ€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ";
                debugMessage.textContent = rockId ? `No rock found with ID: ${rockId}` : "No 'id' parameter in URL";
            }

            document.getElementById("formulaLabel").textContent = translations[currentLanguage].formulaLabel + ":";
            document.getElementById("hardnessLabel").textContent = translations[currentLanguage].hardnessLabel + ":";
            document.getElementById("colorLabel").textContent = translations[currentLanguage].colorLabel + ":";
            document.getElementById("locationLabel").textContent = translations[currentLanguage].locationLabel + ":";
            document.getElementById("usageLabel").textContent = translations[currentLanguage].usageLabel + ":";
            document.getElementById("menuHome").innerHTML = `<span>üè†</span> ${translations[currentLanguage].menuHome}`;
            document.getElementById("menuRocks").innerHTML = `<span>ü™®</span> ${translations[currentLanguage].menuRocks}`;
            document.getElementById("menuSearch").innerHTML = `<span>üîç</span> ${translations[currentLanguage].menuSearch}`;
            document.getElementById("menuAbout").innerHTML = `<span>‚ÑπÔ∏è</span> ${translations[currentLanguage].menuAbout}`;
            document.querySelector(".back-btn").textContent = translations[currentLanguage].backBtn;

            document.body.classList.toggle("rtl", currentLanguage === "fa");
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem("language", lang);
            document.getElementById("languageList").classList.remove("active");
            updatePageLanguage();
        }

        function toggleTheme() {
            document.body.classList.toggle("dark-theme");
            localStorage.setItem("theme", document.body.classList.contains("dark-theme") ? "dark" : "light");
        }

        function toggleLanguageDropdown() {
            document.getElementById("languageList").classList.toggle("active");
        }

        function toggleMenu() {
            const sidebar = document.getElementById("sidebar");
            const menuToggle = document.querySelector(".menu-toggle");
            if (sidebar && menuToggle) {
                sidebar.classList.toggle("active");
                menuToggle.classList.toggle("active");
            }
        }

        function goBack() {
            const lastSection = localStorage.getItem("lastSection") || "home";
            window.location.href = `index.html#${lastSection}`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            if (localStorage.getItem("theme") === "dark") {
                document.body.classList.add("dark-theme");
                document.getElementById("themeSwitch").checked = true;
            }
            updatePageLanguage();
        });

        document.addEventListener('click', (event) => {
            const sidebar = document.getElementById("sidebar");
            const menuToggle = document.querySelector(".menu-toggle");
            const languageList = document.getElementById("languageList");
            const languageBtn = document.querySelector(".language-btn");

            if (sidebar && menuToggle) {
                const isClickInsideSidebar = sidebar.contains(event.target);
                const isClickOnMenuToggle = menuToggle.contains(event.target);
                if (!isClickInsideSidebar && !isClickOnMenuToggle && sidebar.classList.contains("active")) {
                    sidebar.classList.remove("active");
                    menuToggle.classList.remove("active");
                }
            }

            if (languageList && languageBtn) {
                const isClickInsideLanguageList = languageList.contains(event.target);
                const isClickOnLanguageBtn = languageBtn.contains(event.target);
                if (!isClickInsideLanguageList && !isClickOnLanguageBtn && languageList.classList.contains("active")) {
                    languageList.classList.remove("active");
                }
            }
        });
    </script>
</body>
</html>
